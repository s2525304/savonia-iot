<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Savonia IoT</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="favicon.ico" sizes="any">
</head>
<body>
<h1>Savonia IoT</h1>

<div id="auth-status">Checking login…</div>

<div id="app" hidden>
  <select id="device-select"></select>
  <select id="sensor-select" disabled></select>

  <label>
    From
    <input type="datetime-local" id="from">
  </label>
  <label>
    To
    <input type="datetime-local" id="to">
  </label>

  <div class="zoom" id="zoom">
    <div class="zoom-group" aria-label="Zoom 10 minutes">
      <span class="zoom-label">10 min</span>
      <button type="button" id="zoom-in-10m" class="zoom-btn" title="Zoom in to 10 minutes">In</button>
      <button type="button" id="zoom-out-10m" class="zoom-btn" title="Zoom out by 10 minutes">Out</button>
    </div>

    <div class="zoom-group" aria-label="Zoom 1 hour">
      <span class="zoom-label">1 h</span>
      <button type="button" id="zoom-in-1h" class="zoom-btn" title="Zoom in to 1 hour">In</button>
      <button type="button" id="zoom-out-1h" class="zoom-btn" title="Zoom out by 1 hour">Out</button>
    </div>

    <div class="zoom-group" aria-label="Zoom 24 hours">
      <span class="zoom-label">24 h</span>
      <button type="button" id="zoom-in-24h" class="zoom-btn" title="Zoom in to 24 hours">In</button>
      <button type="button" id="zoom-out-24h" class="zoom-btn" title="Zoom out by 24 hours">Out</button>
    </div>
  </div>
  <button id="load">Load</button>
  <button id="csv">Download CSV</button>

  <canvas id="chart"></canvas>

  <div class="legend" id="legend" hidden>
    <label>
      <input type="checkbox" id="line-raw" checked>
      <span class="swatch" style="background:#9ca3af"></span>
      Raw
    </label>
    <label>
      <input type="checkbox" id="line-avg" checked>
      <span class="swatch" style="background:#2563eb"></span>
      Hourly avg
    </label>
    <label>
      <input type="checkbox" id="line-min" checked>
      <span class="swatch" style="background:#7c3aed"></span>
      Hourly min
    </label>
    <label>
      <input type="checkbox" id="line-max" checked>
      <span class="swatch" style="background:#14b8a6"></span>
      Hourly max
    </label>
  </div>

  <div class="trigger" id="trigger" hidden>
    <div class="trigger-header">
      <strong>Alert trigger</strong>
      <span class="muted" id="trigger-status">Not configured</span>
    </div>

    <div class="trigger-fields">
      <label>
        Min
        <input type="number" id="trigger-min" step="any" placeholder="(no min)">
      </label>
      <label>
        Max
        <input type="number" id="trigger-max" step="any" placeholder="(no max)">
      </label>

      <button id="trigger-save" type="button">Save</button>
      <button id="trigger-clear" type="button">Clear</button>
    </div>

    <div class="hint muted">
      Leave a field empty to remove that bound.
    </div>
  </div>

  <div class="alerts" id="alerts">
    <div class="alerts-header">
      <strong>Latest alerts</strong>
      <button id="alerts-refresh" type="button">Refresh</button>
    </div>

    <div class="alerts-meta muted" id="alerts-meta">
      Loading…
    </div>

    <ul class="alerts-list" id="alerts-list" aria-label="Latest alerts"></ul>

    <div class="hint muted">
      Click an alert to load its time window.
    </div>
  </div>
</div>

<script src="utils.js"></script>
<script src="auth.js"></script>
<script src="api.js"></script>
<script src="graph.js"></script>
<script src="app.js"></script>
</body>
</html>